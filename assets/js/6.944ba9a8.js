(window.webpackJsonp=window.webpackJsonp||[]).push([[6],{356:function(t,s,a){t.exports=a.p+"assets/img/sigfox_thinger.6006f9a5.png"},357:function(t,s,a){t.exports=a.p+"assets/img/create_sigfox_bucket.3138cd5c.png"},358:function(t,s,a){t.exports=a.p+"assets/img/create_sigfox_token.4a7fe065.png"},359:function(t,s,a){t.exports=a.p+"assets/img/create_sigfox_callback.a10ee694.png"},360:function(t,s,a){t.exports=a.p+"assets/img/sigfox_callback.a820ac92.png"},361:function(t,s,a){t.exports=a.p+"assets/img/arduino_mkrfox1200.0c257993.jpeg"},362:function(t,s,a){t.exports=a.p+"assets/img/mkrfox1200_install.278696ec.png"},363:function(t,s,a){t.exports=a.p+"assets/img/arduino_sigfox_library.4cdcbf93.png"},364:function(t,s,a){t.exports=a.p+"assets/img/arduino_mkr1200_board_selection.f9019b54.png"},365:function(t,s,a){t.exports=a.p+"assets/img/sigfox_smarteverything_thinger.84f75080.jpg"},366:function(t,s,a){t.exports=a.p+"assets/img/smarteverything_install_arduino.410f94cc.png"},367:function(t,s,a){t.exports=a.p+"assets/img/smarteverything_sigfox_board.e664b1ed.png"},368:function(t,s,a){t.exports=a.p+"assets/img/sigfox_messages.bce4b55a.png"},369:function(t,s,a){t.exports=a.p+"assets/img/sigfox_callback_response.1ce49dda.png"},370:function(t,s,a){t.exports=a.p+"assets/img/sigfox_bucket_data.39967486.png"},371:function(t,s,a){t.exports=a.p+"assets/img/sigfox_dashboard.eddebee7.png"},421:function(t,s,a){"use strict";a.r(s);var n=a(0),e=Object(n.a)({},(function(){var t=this,s=t.$createElement,n=t._self._c||s;return n("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[n("h1",{attrs:{id:"sigfox"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#sigfox"}},[t._v("#")]),t._v(" SIGFOX")]),t._v(" "),n("p",[n("img",{attrs:{src:a(356),alt:""}})]),t._v(" "),n("h2",{attrs:{id:"簡介"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#簡介"}},[t._v("#")]),t._v(" 簡介")]),t._v(" "),n("p",[t._v('Sigfox是一家成立於2009年的法國公司，其建立無線網絡以連接電表、智慧手錶和洗衣機等低功耗物體，這些物體需要不斷的發射少量數據。Sigfox採用專有技術，使用工業、科學和醫療的ISM無線頻段進行通訊，該無線頻段在歐洲使用868MHz，在美國使用902MHz。它使用超窄頻技術，可以在極低電力消耗下覆蓋大範圍區域，也因此這種網路被稱為"低功率廣域網（LPWAN）"。該網路基於單跳(single-hop)星型拓撲，需要ISP承載其產生的流量。該訊號還可用於輕鬆覆蓋大面積區域與位於地下的物體。')]),t._v(" "),n("p",[t._v("Sigfox與LPWAN行業的許多公司合作，如德州儀器公司或Silicon Labs公司。ISM無線頻段支援雙向通訊。現有的Sigfox通訊標準"),n("strong",[t._v("每天最多支援140個上傳訊息")]),t._v("，每個訊息可以承載"),n("strong",[t._v("12字節")]),t._v("的payload（不包括訊息表頭和傳輸資訊）和每天最多4個下載訊息，每個訊息可以承載8個字節的 payload。如果您想了解有關Sigfox的更多詳細資訊，請造訪"),n("a",{attrs:{href:"http://makers.sigfox.com/about/",target:"_blank",rel:"noopener noreferrer"}},[t._v("Sigfox Developer Portal"),n("OutboundLink")],1),t._v("。")]),t._v(" "),n("p",[t._v("本文件將介紹如何將SigFox裝置及其數據結合到Thinger.io平台。在第一步中，我們將回顧如何設定Thinger.io資源，然後在Sigfox方面，我們將設定與平台的通訊以推送我們的傳感器數據。")]),t._v(" "),n("h2",{attrs:{id:"將sigfox裝置與thinger-io結合"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#將sigfox裝置與thinger-io結合"}},[t._v("#")]),t._v(" 將Sigfox裝置與Thinger.io結合")]),t._v(" "),n("p",[t._v("此過程分為兩個部分，一方面，準備Thinger.io以從Sigfox接收數據，另一方面，配置Sigfox雲端回調，該回調將訊息發送回Thinger.io。在下一部分中，我們將從Thinger.io的步驟開始，對這兩個部分進行說明：")]),t._v(" "),n("p",[t._v("有兩種方法可以配置Thinger.io與Sigfox裝置一起使用。最好的選擇是部署"),n("code",[t._v("Sigfox擴充元件")]),t._v('，該擴充元件將提供管理與裝置自動設定功能，上傳/下載鏈路payload處理和裝置管理等進階功能，但是此選項僅適用於已付費訂閱的開發人員。Freemium使用者還是可以按照下面的"傳統結合"部分來結合Sigfox裝置：')]),t._v(" "),n("h3",{attrs:{id:"進階結合-使用sigfox擴充元件"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#進階結合-使用sigfox擴充元件"}},[t._v("#")]),t._v(" "),n("strong",[t._v("進階結合 (使用Sigfox擴充元件)")])]),t._v(" "),n("p",[n("router-link",{attrs:{to:"/plugins/sigfox/"}},[n("ClientOnly",[n("linkref",{attrs:{title:"Sigfox擴充元件",path:"/plugins/sigfox"}})],1)],1)],1),t._v(" "),n("h3",{attrs:{id:"傳統結合-無擴充元件"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#傳統結合-無擴充元件"}},[t._v("#")]),t._v(" 傳統結合 (無擴充元件)")]),t._v(" "),n("p",[t._v("我們需要在Thinger.io帳戶中設定一些資源，例如，定義Sigfox數據的存儲位置，以及對Sigfox平台的存取以將數據存儲在我們的帳戶中。所需的步驟在以下小節中定義。")]),t._v(" "),n("h4",{attrs:{id:"建立數據儲存桶"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#建立數據儲存桶"}},[t._v("#")]),t._v(" 建立數據儲存桶")]),t._v(" "),n("p",[t._v("數據儲存桶用於儲存從Sigfox裝置接收的資訊。因此我們需要建立一個數據儲存桶來存儲我們的Sigfox裝置中的資訊。我們可以使用一個數據儲存桶存儲來自多個裝置的數據，但最好是每個裝置使用一個數據儲存桶。這樣，我們就可以透過建立儀表板，顯示來自每個裝置或感測實體的儲存桶時間序列數據。")]),t._v(" "),n("p",[t._v("然後，打開雲控制台中的"),n("code",[t._v("Buckets")]),t._v("部分，並建立一個新的"),n("code",[t._v("Data Bucket")]),t._v("。我們需要填寫一些細節，例如：")]),t._v(" "),n("ol",[n("li",[n("code",[t._v("Bucket Id")]),t._v(", 您帳戶中的唯一儲存桶ID，稍後與Sigfox結合時使用。此範例中的ID將是"),n("code",[t._v("SmartEverything")]),t._v("。保留此ID，因為它將在Sigfox端使用。")]),t._v(" "),n("li",[n("code",[t._v("Bucket Name")]),t._v(", 比ID的更加易記的標示。")]),t._v(" "),n("li",[n("code",[t._v("Bucket Description")]),t._v(", 關於儲存桶的詳細說明。")]),t._v(" "),n("li",[n("code",[t._v("Enabled")]),t._v(", 此開關用於允許儲存桶寫入，必須打開。")]),t._v(" "),n("li",[n("code",[t._v("Data Source")]),t._v(", 需要設定為"),n("code",[t._v("From Write Call")]),t._v("，因為Sigfox裝置不會直接連接到平台，而是通過REST API接口推送數據。")])]),t._v(" "),n("p",[n("img",{attrs:{src:a(357),alt:""}})]),t._v(" "),n("p",[t._v("填寫表格後，只需點擊"),n("code",[t._v("Add Bucket")]),t._v("即可創建存儲桶。")]),t._v(" "),n("h4",{attrs:{id:"建立存取令牌"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#建立存取令牌"}},[t._v("#")]),t._v(" 建立存取令牌")]),t._v(" "),n("p",[t._v("此時我們已經建立了一個數據儲存桶來存儲我們的Sigfox數據，與任何Thinger.io資源一樣，它們受我們的帳戶憑據保護。這樣，我們需要發出一個存取令牌，允許Sigfox後端與我們的數據儲存桶進行互動。在此範例中，我們將建立一個存取令牌，該令牌僅授予對我們的數據儲存桶的存取權限，並且只授予寫入操作權限。這樣，如果令牌以某種方式洩露，我們就不會向攻擊者公開其他資源。")]),t._v(" "),n("p",[t._v('打開雲控制台中的"存取令牌"部分，並建立一個新的存取令牌。我們需要一些細節，例如：')]),t._v(" "),n("ol",[n("li",[n("code",[t._v("Token Id")]),t._v(", 您帳戶中的唯一令牌標識符。")]),t._v(" "),n("li",[n("code",[t._v("Token Name")]),t._v(",  比ID的更加易記的標示。")]),t._v(" "),n("li",[n("code",[t._v("Enabled")]),t._v(", 必須打開以允許使用令牌。如果需要，可以隨時將其關閉。")]),t._v(" "),n("li",[n("code",[t._v("Token permissions")]),t._v(", 此設定為該令牌允許存取儲存桶資源的權限，"),n("code",[t._v("SmartEverything")]),t._v("在此例會使用到"),n("code",[t._v("WriteBucket")]),t._v("權限進行操作。")])]),t._v(" "),n("p",[n("img",{attrs:{src:a(358),alt:""}})]),t._v(" "),n("p",[t._v('填寫表單後，只需點擊"Add Bucket"即可建立令牌。此時將出現令牌值。在我們的例子中，產生的令牌如下。保留此令牌，因為它將在Sigfox端使用。')]),t._v(" "),n("div",{staticClass:"language- extra-class"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[t._v("eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJqdGkiOiJTbWFydEV2ZXJ5dGhpbmciLCJ1c3IiOiJhbHZhcm9sYiJ9.0Qb48c_ToBiIVcCOdvXU2Kn51mTnGLDcN44shVRzNls\n")])])]),n("h2",{attrs:{id:"sigfox-雲端設定"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#sigfox-雲端設定"}},[t._v("#")]),t._v(" Sigfox 雲端設定")]),t._v(" "),n("p",[t._v("此時，我們已經完成在Thinger.io數據儲存桶上接收數據所需的一切。下一步是使用我們的令牌ID和我們生成的令牌設定Sigfox後端以將數據推送給Thinger.io平台。")]),t._v(" "),n("h3",{attrs:{id:"建立-sigfox-回調"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#建立-sigfox-回調"}},[t._v("#")]),t._v(" 建立 Sigfox 回調")]),t._v(" "),n("p",[t._v("現在，我們建立一個Sigfox回調(Callback)，將訊息從我們的Sigfox裝置推送到我們的Thinger.io數據儲存桶。在我們的範例中，回調是在Sigfox裝置通過網絡發送數據時調用的端點，因此我們將設定指向數據儲存桶的回調。")]),t._v(" "),n("p",[t._v("要在Sigfox中建立回調，請按照以下步驟操作：")]),t._v(" "),n("ol",[n("li",[t._v("前往 "),n("a",{attrs:{href:"https://backend.sigfox.com",target:"_blank",rel:"noopener noreferrer"}},[t._v("https://backend.sigfox.com"),n("OutboundLink")],1),t._v(" 並登錄您的帳戶。我們假設您已經在平台上註冊了您的裝置。")]),t._v(" "),n("li",[t._v("點擊"),n("code",[t._v("Device Type")]),t._v("頂部的選項卡，然後點擊要設定的裝置類型名稱。或者，您可以切換到"),n("code",[t._v("Device")]),t._v("選項卡，然後點擊裝置的"),n("code",[t._v("Device type")]),t._v("。")]),t._v(" "),n("li",[t._v("於左側選單點擊"),n("code",[t._v("Callbacks")]),t._v("，然後進行新增。")])]),t._v(" "),n("p",[t._v("在此步驟中，您需要選擇要建立"),n("code",[t._v("Custom Callback")]),t._v("的埠口，因為我們需要調用Sigfox後端不直接支援的端點。")]),t._v(" "),n("p",[n("img",{attrs:{src:a(359),alt:""}})]),t._v(" "),n("p",[t._v("接著，我們需要設定回調以寫入我們的數據儲存桶。如果您想了解設定的外觀，請參考我們的截圖，你會在截圖中看到每個區域的詳細資訊。")]),t._v(" "),n("p",[n("img",{attrs:{src:a(360),alt:""}})]),t._v(" "),n("p",[t._v("我們的範例中的設定如下：")]),t._v(" "),n("ol",[n("li",[n("p",[n("code",[t._v("Type")]),t._v(" 為 "),n("code",[t._v("DATA")]),t._v(" 與 "),n("code",[t._v("UPLINK")]),t._v(", 因為我們希望發送裝置中的數據。")])]),t._v(" "),n("li",[n("p",[n("code",[t._v("Channel")]),t._v(" 類型是 "),n("code",[t._v("URL")]),t._v("，因為我們將調用HTTP端點。")])]),t._v(" "),n("li",[n("p",[n("code",[t._v("Send duplicate")]),t._v(" 禁用以避免寫入不同基站收到的重複訊息。")])]),t._v(" "),n("li",[n("p",[n("code",[t._v("Custom payload config")]),t._v(" 將完全取決於您的裝置發送的payload。在我們的例子中，我們的裝置將溫度和濕度發送為32位浮點數，因此我們將payload設定為 "),n("code",[t._v("temp::float:32:little-endian hum::float:32:little-endian")]),t._v("，其中我們將"),n("code",[t._v("temp")]),t._v("與"),n("code",[t._v("hum")]),t._v(" 參數定義為小頭順序的32位浮點數。請注意，Sigfox每則訊息僅支援12字節的payload，因此您必須對此空間最佳化，例如，如果不需要達浮點數的精度，則將溫度和濕度作為整數發送。")])]),t._v(" "),n("li",[n("p",[n("code",[t._v("Url pattern")]),t._v(" 必需根據您的Thinger.io使用者ID和我們的儲存桶名稱進行配置。")]),t._v(" "),n("ul",[n("li",[t._v("格式應該是這樣的 "),n("code",[t._v("https://api.thinger.io/v1/users/{user_id}/buckets/{bucket_id}/data")]),t._v(".")]),t._v(" "),n("li",[t._v("你必須根據您的帳戶改變"),n("code",[t._v("{user_id}")]),t._v("與"),n("code",[t._v("{bucket_id}")]),t._v("。在我們的範例中，模式最終的url將是"),n("code",[t._v("https://api.thinger.io/v1/users/alvarolb/buckets/SmartEverything/data")]),t._v(".")]),t._v(" "),n("li",[t._v("請注意，您還可以使用Sigfox變數來構建您的URL，即為了將來自每個裝置的數據存儲到不同的數據儲存桶，我們可以建立一個URL，如："),n("code",[t._v("https://api.thinger.io/v1/users/alvarolb/buckets/{device}/data")]),t._v(".")])])]),t._v(" "),n("li",[n("p",[n("code",[t._v("HTTP Method")]),t._v(" 應該設定為POST。")])]),t._v(" "),n("li",[n("p",[t._v("我們必須在"),n("code",[t._v("Headers")]),t._v("中加入"),n("code",[t._v("Authorization")]),t._v("項目，其包含一個裝置令牌，以便對數據儲存桶寫入請求進行身份驗證。")]),t._v(" "),n("ul",[n("li",[n("p",[t._v("標頭名稱應為 "),n("code",[t._v("Authorization")])])]),t._v(" "),n("li",[n("p",[t._v("其值應該是 "),n("code",[t._v("Bearer {access_token}")]),t._v("，且 "),n("code",[t._v("{access_token}")]),t._v(" 為您在前一個章節中產生的令牌。")])]),t._v(" "),n("li",[n("p",[t._v("在我們的例子中，我們的最終標頭值如下。注意"),n("code",[t._v("Bearer")]),t._v("和令牌之間的空格。")]),t._v(" "),n("div",{staticClass:"language- extra-class"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[t._v("Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJqdGkiOiJTbWFydEV2ZXJ5dGhpbmciLCJ1c3IiOiJhbHZhcm9sYiJ9.0Qb48c_ToBiIVcCOdvXU2Kn51mTnGLDcN44shVRzNls\n")])])])])])]),t._v(" "),n("li",[n("p",[t._v("最後一步是設定"),n("code",[t._v("Body")]),t._v("和它的"),n("code",[t._v("Content type")]),t._v("。對於"),n("code",[t._v("Content type")]),t._v("，我們使用"),n("code",[t._v("application/json")]),t._v("，儲存桶可以存儲任意JSON數據。然後，"),n("code",[t._v("Body")]),t._v("將包含我們要以JSON格式格式化的所有資訊。在Sigfox中，您可以根據可用變數定義您的"),n("code",[t._v("Body")]),t._v("，這些變數由平臺定義（如裝置ID，連接品質或裝置位置），或由您的payload定義。在我們的例子中，我們定義了變數"),n("code",[t._v("temp")]),t._v("與"),n("code",[t._v("hum")]),t._v("並且將其包含在一個Sigfox變數中。對於此範例，我們的payload將如下所示：")]),t._v(" "),n("div",{staticClass:"language-javascript extra-class"},[n("pre",{pre:!0,attrs:{class:"language-javascript"}},[n("code",[t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"device"')]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"{device}"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"snr"')]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("snr"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"rssi"')]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("rssi"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"station"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"{station}"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"latitude"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("lat"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"longitude"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("lng"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"temperature"')]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("customData#temp"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"humidity"')]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("customData#hum"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),n("p",[t._v("請注意，我們正在將Sigfox變數，像是"),n("code",[t._v("{device}")]),t._v("與我們在payload中的自定義數據如"),n("code",[t._v("{customData#temp}")]),t._v("混合使用。然後在每次接收訊息時處理它，並且將用即時值取代變數。因此，伺服器將接收具有裝置ID，裝置溫度，濕度，粗略位置（km精度）和訊號品質的JSON payload。")])])]),t._v(" "),n("p",[t._v("完成這些步驟後，我們現在完成了將數據推送到數據儲存桶的回調設定。")]),t._v(" "),n("h3",{attrs:{id:"編寫sigfox裝置的程式"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#編寫sigfox裝置的程式"}},[t._v("#")]),t._v(" 編寫Sigfox裝置的程式")]),t._v(" "),n("p",[t._v("現在是時候開始程式設計給我們的Sigfox裝置，它將把數據發送到我們的數據儲存桶。在這種情況下，我們提供了"),n("a",{attrs:{href:"http://www.smarteverything.it/",target:"_blank",rel:"noopener noreferrer"}},[t._v("SmartEverything"),n("OutboundLink")],1),t._v("和"),n("a",{attrs:{href:"https://www.arduino.cc/en/Main.ArduinoBoardMKRFox1200",target:"_blank",rel:"noopener noreferrer"}},[t._v("Arduino MKRFOX1200"),n("OutboundLink")],1),t._v("的範例。")]),t._v(" "),n("h4",{attrs:{id:"arduino-mkrfox1200"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#arduino-mkrfox1200"}},[t._v("#")]),t._v(" Arduino MKRFOX1200")]),t._v(" "),n("p",[t._v("Arduino MKRFOX1200旨在為尋求為項目中加入SigFox連接的製造商提供實用且經濟高效，同時具有最少網路成本的解決方案。它基於Microchip SAMD21和ATA8520 SigFox模組。可以使用典型用途的2節AA 1.5V電池執行六個月以上。該設計包括使用兩節1.5V AA或AAA電池或外部5V為電路板供電的能力。")]),t._v(" "),n("p",[n("img",{attrs:{src:a(361),alt:""}})]),t._v(" "),n("p",[n("strong",[t._v("初始化")])]),t._v(" "),n("p",[t._v("要對此裝置進行編輯，我們將使用 "),n("a",{attrs:{href:"https://arduino.cc",target:"_blank",rel:"noopener noreferrer"}},[t._v("Arduino IDE"),n("OutboundLink")],1),t._v("。在這種情況下，有必要安裝或更新電路板工具組，可以直接從電路板管理器完成，搜尋"),n("code",[t._v("mrk")]),t._v("和選擇Arduino SAMD電路板。")]),t._v(" "),n("p",[n("img",{attrs:{src:a(362),alt:""}})]),t._v(" "),n("p",[t._v("您還需要安裝程式庫管理器中提供的"),n("code",[t._v("Arduino SigFox for MKRFox1200")]),t._v("程式庫，同時也"),n("strong",[t._v("必需")]),t._v("安裝"),n("code",[t._v("Arduino Low Power")]),t._v("和"),n("code",[t._v("RTCZero")]),t._v("程式庫。")]),t._v(" "),n("p",[n("img",{attrs:{src:a(363),alt:""}})]),t._v(" "),n("p",[t._v("安裝成功後，我們現在可以在Arduino IDE中選擇Arduino MKRFOX12000。您還必須像任何其他Arduino板一樣選擇裝置所連接的埠口。")]),t._v(" "),n("p",[n("img",{attrs:{src:a(364),alt:""}})]),t._v(" "),n("p",[t._v("您可以通過燒錄以下範例來檢查所有內容是否已啟動並執行，該範例將提供有關模組的訊息，例如電路板ID和PAC。在Sigfox中註冊裝置需要這些資訊。")]),t._v(" "),n("div",{staticClass:"language-cpp extra-class"},[n("pre",{pre:!0,attrs:{class:"language-cpp"}},[n("code",[n("span",{pre:!0,attrs:{class:"token macro property"}},[t._v("#"),n("span",{pre:!0,attrs:{class:"token directive keyword"}},[t._v("include")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("<SigFox.h>")])]),t._v("\n\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("void")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("setup")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  Serial"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("begin")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("9600")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" \n\n  "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("while")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("!")]),t._v("Serial"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n  "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("!")]),t._v("SigFox"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("begin")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    Serial"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("println")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"Shield error or not present!"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n  String version "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" SigFox"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("SigVersion")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  String ID "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" SigFox"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("ID")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  String PAC "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" SigFox"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("PAC")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n  "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// Display module informations")]),t._v("\n  Serial"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("println")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"MKRFox1200 Sigfox first configuration"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  Serial"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("println")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"SigFox FW version "')]),t._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),t._v(" version"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  Serial"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("println")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"ID  = "')]),t._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),t._v(" ID"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  Serial"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("println")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"PAC = "')]),t._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),t._v(" PAC"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n  Serial"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("println")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('""')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n  Serial"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("print")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"Module temperature: "')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  Serial"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("println")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("SigFox"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("internalTemperature")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n  Serial"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("println")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"Register your board on https://backend.sigfox.com/activate with provided ID and PAC"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n  "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("delay")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("100")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n  "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// Send the module to the deepest sleep")]),t._v("\n  SigFox"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("end")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("void")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("loop")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// put your main code here, to run repeatedly:")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),n("p",[n("strong",[t._v("注意")]),t._v("：從現在開始，我們假設您已經註冊了您的Sigfox帳戶。如果還沒，請閱讀Arduino 的"),n("a",{attrs:{href:"https://www.arduino.cc/en/Tutorial/SigFoxFirstConfiguration",target:"_blank",rel:"noopener noreferrer"}},[t._v("First Configuration"),n("OutboundLink")],1),t._v("教學。")]),t._v(" "),n("p",[n("strong",[t._v("將數據推送到Sigfox")])]),t._v(" "),n("p",[t._v("我們已經啟動了工具鏈，可以開始寫程式來將數據推送到Sigfox後端了。在介紹程式碼之前，"),n("strong",[t._v("請記住")]),t._v("我們在Sigfox中定義的回調中，我們建立了一個payload設定，期望接收兩個代表溫度和濕度的浮點數。因此，我們的payload必須與此定義匹配：")]),t._v(" "),n("div",{staticClass:"language- extra-class"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[t._v(" temp::float:32:little-endian hum::float:32:little-endian\n")])])]),n("p",[t._v("在我們的程式碼中，這個payload可以很容易地用一個"),n("code",[t._v("struct")]),t._v("包含兩個浮點數的表示。")]),t._v(" "),n("p",[t._v("顯然您可以使用不同的數據類型定義自己的"),n("code",[t._v("struct")]),t._v("（但要注意結構偏移和層次），同時必須重新設定Sigfox payload以正確解碼您要發送的字段。")]),t._v(" "),n("div",{staticClass:"language-cpp extra-class"},[n("pre",{pre:!0,attrs:{class:"language-cpp"}},[n("code",[t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("struct")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("data")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("float")]),t._v(" temp"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("float")]),t._v(" hum"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),n("p",[t._v("因此，程式碼最終將如下所示。我們使用Arduino MKRFOX1200和DHT傳感器，提供在Sigfox後端設定的回調所需的溫度和濕度。如果您沒有DHT傳感器，可以嘗試使用電路板的內部溫度傳感器，通過調用"),n("code",[t._v("SigFox.internalTemperature()")]),t._v("，並將濕度值設置為0或任何其他值。")]),t._v(" "),n("div",{staticClass:"language-cpp extra-class"},[n("pre",{pre:!0,attrs:{class:"language-cpp"}},[n("code",[t._v(" "),n("span",{pre:!0,attrs:{class:"token macro property"}},[t._v("#"),n("span",{pre:!0,attrs:{class:"token directive keyword"}},[t._v("include")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("<SigFox.h>")])]),t._v("\n "),n("span",{pre:!0,attrs:{class:"token macro property"}},[t._v("#"),n("span",{pre:!0,attrs:{class:"token directive keyword"}},[t._v("include")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("<SimpleDHT.h>")])]),t._v("\n "),n("span",{pre:!0,attrs:{class:"token macro property"}},[t._v("#"),n("span",{pre:!0,attrs:{class:"token directive keyword"}},[t._v("include")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("<ArduinoLowPower.h>")])]),t._v("\n\n "),n("span",{pre:!0,attrs:{class:"token macro property"}},[t._v("#"),n("span",{pre:!0,attrs:{class:"token directive keyword"}},[t._v("define")]),t._v(" DHT11_PIN 0")]),t._v("\n\n "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("void")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("setup")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n   Serial"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("begin")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("9600")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n   "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("pinMode")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("LED_BUILTIN"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" OUTPUT"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("void")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("blink")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("unsigned")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("int")]),t._v(" count"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("unsigned")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("long")]),t._v(" ms"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n   "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("for")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("int")]),t._v(" i"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" i"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("count"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" i"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("++")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n     "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("digitalWrite")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("LED_BUILTIN"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" HIGH"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n     "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("delay")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("ms"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n     "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("digitalWrite")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("LED_BUILTIN"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" LOW"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("    \n     "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("delay")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("ms"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n   "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("void")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("send_data")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n   "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// initialize sigfox module")]),t._v("\n   SigFox"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("begin")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n   "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("delay")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("100")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n   "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// Enable debug led and disable automatic deep sleep")]),t._v("\n   SigFox"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("debug")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n   "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// clears all pending interrupts")]),t._v("\n   SigFox"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("status")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n   "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("delay")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n   "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// define sigfox payload data structure")]),t._v("\n   "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("struct")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("data")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n     "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("float")]),t._v(" temp"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n     "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("float")]),t._v(" hum"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n   "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n   "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// read temperature and humidity from DHT sensor connected at pin DHT11_PIN")]),t._v("\n   SimpleDHT11 dht11"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n   byte temp"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" hum"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n   dht11"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("read")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("DHT11_PIN"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("&")]),t._v("temp"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("&")]),t._v("hum"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token constant"}},[t._v("NULL")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n   "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// NOTE! it is not quite efficient sending bytes as floats over the net, but this is just for illustrative purposes")]),t._v("\n   "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("struct")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("data")]),t._v(" reading"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n   reading"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("temp "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" temp"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n   reading"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("hum "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" hum"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n   "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// send the structure to sigfox (8 bytes)")]),t._v("\n   Serial"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("println")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"Sending SigFox message!"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n   "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// start a packet")]),t._v("\n   SigFox"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("beginPacket")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n   "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// write our buffer")]),t._v("\n   SigFox"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("write")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("char")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("*")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("&")]),t._v("reading"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("sizeof")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("reading"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n   "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// send buffer to SIGFOX network")]),t._v("\n   "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("int")]),t._v(" ret "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" SigFox"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("endPacket")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("  \n   "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("ret "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n     Serial"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("println")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"No transmission"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n     "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 3 quick blink on error")]),t._v("\n     "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("blink")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("3")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("500")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n   "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("else")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n     Serial"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("println")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"Transmission ok"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n     "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 1 blink on success")]),t._v("\n     "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("blink")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("1000")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n   "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n   SigFox"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("end")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("void")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("loop")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n   "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("send_data")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n   "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("delay")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("10")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("*")]),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("60")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("*")]),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("1000")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n   "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// you can deep sleep the device if you want")]),t._v("\n   "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//LowPower.sleep(10*60*1000);")]),t._v("\n "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),n("p",[n("strong",[t._v("請注意")]),t._v("，如果您想使Arduino MRKFOX1200深度睡眠，即使用電池運作時，您可以取消"),n("code",[t._v("LowPower.sleep")]),t._v("的註解，並註解"),n("code",[t._v("sleep")]),t._v("。你也可以避免使用"),n("code",[t._v("Serial")]),t._v("，以及僅有偵錯目的"),n("code",[t._v("SigFox.debug()")]),t._v("。在睡眠模式下，裝置需要手動重置才能再次燒錄。")]),t._v(" "),n("h4",{attrs:{id:"smarteverything"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#smarteverything"}},[t._v("#")]),t._v(" SmartEverything")]),t._v(" "),n("p",[t._v("SmartEverything是專為快速原型設計而設計的物聯網裝置，因為它完全相容於Arduino，可以使用多個傳感器，如MEMS壓力傳感器，接近和環境光傳感器，iNEMO 9軸慣性模組，濕度和溫度傳感器，甚至NFC NTAG，或GPS / GNSS天線。這些功能非常有趣，該主板還結合了低功耗藍牙（BLE），當然還有Sigfox模組（Telit LE51-868 S 868MHz模組）。")]),t._v(" "),n("p",[n("img",{attrs:{src:a(365),alt:""}})]),t._v(" "),n("p",[t._v("憑藉這些出色的功能，我們可以將電路板用於多種用途，例如使用GPS進行車輛追蹤、建立微型氣象站、使用加速度計偵測震動和衝擊，以及用於其他任何地方。")]),t._v(" "),n("p",[t._v("而在此例僅記錄溫度和濕度，我們建立了一個簡單的程式碼，每10分鐘就會記錄一次溫度和濕度。")]),t._v(" "),n("p",[n("strong",[t._v("初始化")])]),t._v(" "),n("p",[t._v("要對此裝置進行程式設計，我們將使用"),n("a",{attrs:{href:"https://arduino.cc",target:"_blank",rel:"noopener noreferrer"}},[t._v("Arduino IDE"),n("OutboundLink")],1),t._v("。在這種情況下，需要安裝電路板工具鏈，可以直接從電路板管理器完成，搜尋"),n("code",[t._v("smarteverything")]),t._v("並選擇"),n("code",[t._v("Axel Elettronica")]),t._v("的Arrow Boards。")]),t._v(" "),n("p",[n("img",{attrs:{src:a(366),alt:""}})]),t._v(" "),n("p",[t._v("安裝成功後，我們現在可以在Arduino IDE中選擇開發板。只需選擇"),n("code",[t._v("SmartEverything Fox（Native USB Port）")]),t._v("即可。您還必須像任何其他Arduino板一樣選擇裝置所連接的埠口。")]),t._v(" "),n("p",[n("img",{attrs:{src:a(367),alt:""}})]),t._v(" "),n("p",[n("strong",[t._v("將數據推送到Sigfox")])]),t._v(" "),n("p",[t._v("現在是時候編寫一個簡單的程式來將我們的傳感器讀數發送給Sigfox。提供的範例程式將在"),n("code",[t._v("setup()")]),t._v("中基本初始化Sigfox調製解調器、傳感器和USB串列埠以進行一些偵錯。然後，在"),n("code",[t._v("loop()")]),t._v("中，我們的程式將讀取溫度和濕度，並將數據傳輸到Sigfox。它還將檢查傳輸是否成功，成功時閃爍綠色LED或否則為紅色LED。在那之後，它會睡10分鐘，正如我們在介紹中所提到的，Sigfox每天只允許140則訊息。")]),t._v(" "),n("p",[t._v("在介紹程式碼之前，"),n("strong",[t._v("請記住")]),t._v("在我們在Sigfox定義的回調中，我們建立了一個payload設定，期望接收兩個代表溫度和濕度的浮點數。因此，我們的payload必須與此定義匹配：")]),t._v(" "),n("div",{staticClass:"language- extra-class"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[t._v("temp::float:32:little-endian hum::float:32:little-endian\n")])])]),n("p",[t._v("在我們的程式碼中，這個payload可以很容易地用一個"),n("code",[t._v("struct")]),t._v("包含兩個浮點數的表示。")]),t._v(" "),n("p",[t._v("顯然您可以使用不同的數據類型定義自己的"),n("code",[t._v("struct")]),t._v("（但要注意結構偏移和層次），同時必須重新設定Sigfox payload以正確解碼您要發送的字段。")]),t._v(" "),n("div",{staticClass:"language-cpp extra-class"},[n("pre",{pre:!0,attrs:{class:"language-cpp"}},[n("code",[n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("struct")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("data")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("float")]),t._v(" temp"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("float")]),t._v(" hum"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),n("p",[t._v("因此，程式碼最終將如下所示。"),n("strong",[t._v("請注意")]),t._v("，此程式碼尚未針對電池供電的情況進行最佳化。如果需要，可以對裝置啟用省電模式，但這超出了本範例的範圍。")]),t._v(" "),n("div",{staticClass:"language-cpp extra-class"},[n("pre",{pre:!0,attrs:{class:"language-cpp"}},[n("code",[n("span",{pre:!0,attrs:{class:"token macro property"}},[t._v("#"),n("span",{pre:!0,attrs:{class:"token directive keyword"}},[t._v("include")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("<Wire.h>")])]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token macro property"}},[t._v("#"),n("span",{pre:!0,attrs:{class:"token directive keyword"}},[t._v("include")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("<SmeSFX.h>")])]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token macro property"}},[t._v("#"),n("span",{pre:!0,attrs:{class:"token directive keyword"}},[t._v("include")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("<Arduino.h>")])]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token macro property"}},[t._v("#"),n("span",{pre:!0,attrs:{class:"token directive keyword"}},[t._v("include")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("<HTS221.h>")])]),t._v("\n\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("void")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("setup")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// init temp & hum sensor")]),t._v("\n  Wire"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("begin")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  smeHumidity"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("begin")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n  "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// init serial")]),t._v("\n  SerialUSB"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("begin")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("115200")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n  "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// init sigfox module")]),t._v("\n  sfxAntenna"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("begin")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("19200")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("&")]),t._v("SigFox"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  sfxAntenna"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("setSfxDataMode")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" \n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("void")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("send_data")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// define sigfox payload data structure")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("struct")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("data")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("float")]),t._v(" temp"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("float")]),t._v(" hum"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n  "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// read sensor data into the struct")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("struct")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("data")]),t._v(" reading"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  reading"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("temp "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" smeHumidity"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("readHumidity")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  reading"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("hum "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" smeHumidity"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("readTemperature")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n  "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// send the structure to sigfox (8 bytes)")]),t._v("\n  SerialUSB"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("println")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"Sending SigFox message!"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  sfxAntenna"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("sfxSendData")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("char")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("*")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("&")]),t._v("reading"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("sizeof")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("reading"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("void")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("loop")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// send sigfox data")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("send_data")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n  "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// wait for a response")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("bool")]),t._v(" response"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),n("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("false")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("do")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("sfxAntenna"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("hasSfxAnswer")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n      "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("switch")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("sfxAntenna"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("sfxDataAcknoledge")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n      "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("case")]),t._v(" SFX_DATA_ACK_OK"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v("\n          "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("ledGreenLight")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("HIGH"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n          SerialUSB"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("println")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"Answer OK! :)"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n          "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("delay")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("2000")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n          "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("ledGreenLight")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("LOW"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n          response "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("true")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n          "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("break")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n      "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("case")]),t._v(" SFX_DATA_ACK_KO"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v("\n          "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("ledRedLight")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("HIGH"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n          SerialUSB"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("println")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"Answer KO :("')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n          "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("delay")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("2000")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n          "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("ledRedLight")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("LOW"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n          response "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("true")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n          "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("break")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n      "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("while")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("!")]),t._v("response"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n  "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// sleep ten minutes for the next message")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("delay")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("10")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("*")]),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("60")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("*")]),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("1000")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),n("h2",{attrs:{id:"檢查-sigfox-的設定"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#檢查-sigfox-的設定"}},[t._v("#")]),t._v(" 檢查 Sigfox 的設定")]),t._v(" "),n("p",[t._v("在我們同時執行裝置程式碼，設定Sigfox回調以及建立數據儲存桶之後，我們應該立即檢查所有內容是否已啟動並執行。")]),t._v(" "),n("p",[t._v("我們可以從檢查Sigfox平台是否正在接收我們的訊息開始。只需切換到Sigfox平台後端，然後打開左側面板上"),n("code",[t._v("Messages")]),t._v("的部分。我們應該看到類似於以下截圖畫面的內容，其中已收到一些訊息。您還可以檢視正在發送的有效負載（十六進制）以及鏈路品質，時間戳或回調結果等其他訊息。")]),t._v(" "),n("p",[n("img",{attrs:{src:a(368),alt:""}})]),t._v(" "),n("p",[t._v("這裡有趣的是檢查我們的回調響應是否成功，因為回調圖示會根據結果從綠色變為紅色。在我們的例子中，我們的回調是綠色的，所以請求沒問題。您可以點擊該圖示以檢視伺服器響應，即HTTP響應200 OK 。")]),t._v(" "),n("p",[n("img",{attrs:{src:a(369),alt:""}})]),t._v(" "),n("p",[t._v("然後我們還可以檢查我們的數據儲存桶是否正在填充從Sigfox收到的數據。在Thinger.io中打開數據儲存桶應如下所示。")]),t._v(" "),n("p",[n("img",{attrs:{src:a(370),alt:""}})]),t._v(" "),n("p",[t._v("太好了！我們現在存儲了數據。請注意，儲存桶中的欄位是我們在Sigfox回調中設定的字段。")]),t._v(" "),n("h2",{attrs:{id:"建立儀表板"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#建立儀表板"}},[t._v("#")]),t._v(" 建立儀表板")]),t._v(" "),n("p",[t._v("現在我們已將數據存儲在儲存桶中，我們可以使用Sigfox數據建立即時儀表板。您可以建立小工具，選擇您的儲存桶作為數據源，以上就是全部！")]),t._v(" "),n("p",[n("img",{attrs:{src:a(371),alt:""}})])])}),[],!1,null,null,null);s.default=e.exports}}]);